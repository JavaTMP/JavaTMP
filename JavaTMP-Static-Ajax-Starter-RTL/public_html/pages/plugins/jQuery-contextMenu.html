<div class="dynamic-ajax-content">
    <div class="page-header">
        <h1>jQuery contextMenu plugin</h1>
    </div>
    <div class="row">
        <div class="col-lg-12">
            <div class="alert alert-info">
                <p>jQuery contextMenu plugin & polyfill.</p>
                <br/>
                <p>
                    <a class="btn btn-info" target="_blank" href="http://swisnl.github.io/jQuery-contextMenu/demo.html"><i class="fa fa-external-link-alt fa-fw"></i>Demo Page</a>
                    <a class="btn btn-info" target="_blank" href="https://github.com/swisnl/jQuery-contextMenu"><i class="fa fa-external-link-alt fa-fw"></i>github.com Page</a>
                </p>
            </div>
            <div class="card my-3">
                <div class="card-header">
                    Examples
                    <div class="options float-right">
                        <a class="settings"><i class="fa fa-cog"></i></a>
                        <a href="#" class="collapse"><i class="fa fa-chevron-up"></i></a>
                        <a href="#" class="reload"><i class="fa fa-sync"></i></a>
                        <a href="#" class="fullscreen"><i class=" fa fa-expand"></i></a>
                        <a href="#" class="remove"><i class="fa fa-times"></i></a>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-12">
                            <button class="context-menu-one btn btn-primary">right click me</button>
                            <h4>Context Menu on DOM Element</h4>
                            <ul id="the-node">
                                <li><span class="context-menu-one">right click me 1</span></li>
                                <li><span class="context-menu-one">right click me 2</span></li>
                                <li>right click me 3</li>
                                <li>right click me 4</li>
                            </ul>
                            <h4>Left-Click Trigger</h4>
                            <button class="left-context-menu-one btn btn-primary">Left click me</button>
                            <h4>Submenus</h4>
                            <button class="left-context-submenus-one btn btn-primary">Right click me</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <style type="text/css">
        .context-menu-icon-good-job:before {
            font-family: FontAwesome !important;
            content: "\f087";
        }
        .context-menu-item.context-menu-icon-png {  }

        .context-menu-icon-png:before {
            content: ".";
            background-image: url(assets/img/thumbs-up.png);
            background-repeat: no-repeat;
            position: absolute;
            top: auto;
            left: 7px;
            line-height: inherit;
            vertical-align: baseline;
            color: transparent!important;
            text-align: center;
            -webkit-transform: none;
            -ms-transform: none;
            -o-transform: none;
            transform: none;
            -webkit-font-smoothing: none;
            -moz-osx-font-smoothing: none;
        }
        .context-menu-icon::before {
            /*color: #428BCA;*/
        }

    </style>
    <script type="text/javascript">
        jQuery(function ($) {
            // any code put here will be run after content attach to ajax output container and before
            // controll return to main javascript file.
            var currentMousePos = {x: -1, y: -1};
            $(document).mousemove(function (event) {
                currentMousePos.x = event.pageX;
                currentMousePos.y = event.pageY;
                currentMousePos.clientY = event.clientY;
                currentMousePos.clientX = event.clientX;
                currentMousePos.windowheight = window.innerHeight;
                console.log(JSON.stringify(currentMousePos));
            });
            $.contextMenu({
                rtl: true,
                position: function (opt, x, y) {
                    var menuWidth = $(opt.$menu).outerWidth();
                    var menuHeight = $(opt.$menu).outerHeight();
                    console.log(currentMousePos.clientY + " , " + menuHeight + " , " + (currentMousePos.clientY + menuHeight) + " more than " + currentMousePos.windowheight);
                    var actualLocation = currentMousePos.clientY;
                    if ((currentMousePos.clientY + menuHeight) > currentMousePos.windowheight) {
                        console.log("it is more than so we show context on top");
                        actualLocation = currentMousePos.y - menuHeight;
                    } else {
                        console.log("We can show the context down");
                        actualLocation = currentMousePos.y;
                    }
                    opt.$menu.css({top: actualLocation, left: x - menuWidth});
                },
                callback: function (key, options) {
                    BootstrapModalWrapperFactory.showMessage('Selected action "' + key + '"');
                },
                selector: '.context-menu-one',
                items: {
                    "edit": {name: "Edit", icon: "edit"},
                    "cut": {name: "Cut", icon: "cut"},
                    copy: {name: "Copy", icon: "copy"},
                    "paste": {name: "Paste", icon: "paste"},
                    "delete": {name: "Delete", icon: "delete"},
                    "sep1": "---------",
                    "quit": {name: "Quit", icon: "fa-close"}
                }
            });
            $.contextMenu({
                rtl: true,
                selector: '.left-context-menu-one',
                trigger: 'left',
                position: function (opt, x, y) {
                    var menuWidth = $(opt.$menu).outerWidth();
                    opt.$menu.css({top: y, left: x - menuWidth});
                },
                callback: function (key, options) {
                    BootstrapModalWrapperFactory.showMessage('Selected action "' + key + '"');
                },
                items: {
                    "edit": {name: "Edit", icon: "edit"},
                    "cut": {name: "Cut", icon: "cut"},
                    "copy": {name: "Copy", icon: "copy"},
                    "paste": {name: "Paste", icon: "paste"},
                    "delete": {name: "Delete", icon: "delete"},
                    "sep1": "---------",
                    "quit": {name: "Quit", icon: function ($element, key, item) {
                            return 'context-menu-icon context-menu-icon-quit';
                        }}
                }
            });
            $.contextMenu({
                rtl: true,
                selector: '.left-context-submenus-one',
                position: function (opt, x, y) {
                    var menuWidth = $(opt.$menu).outerWidth();
                    opt.$menu.css({top: 300, left: x - menuWidth});
                },
                callback: function (key, options) {
                    BootstrapModalWrapperFactory.showMessage('Selected action "' + key + '"');
                },
                items: {
                    "edit": {"name": "Edit", "icon": "edit"},
                    "cut": {"name": "Cut", "icon": "cut"},
                    "sep1": "---------",
                    "quit": {"name": "Quit", "icon": "quit"},
                    "sep2": "---------",
                    "fold1": {
                        "name": "Sub group",
                        "items": {
                            "fold1-key1": {"name": "Foo bar"},
                            "fold2": {
                                "name": "Sub group 2",
                                "items": {
                                    "fold2-key1": {"name": "alpha"},
                                    "fold2-key2": {"name": "bravo"},
                                    "fold2-key3": {"name": "charlie"}
                                }
                            },
                            "fold1-key3": {"name": "delta"}
                        }
                    },
                    "fold1a": {
                        "name": "Other group",
                        "items": {
                            "fold1a-key1": {"name": "echo"},
                            "fold1a-key2": {"name": "foxtrot"},
                            "fold1a-key3": {"name": "golf"}
                        }
                    }
                }
            });

            // fire AFTER all transition done and your ajax content is shown to user.
            $(javatmp.settings.defaultOutputSelector).on(javatmp.settings.javaTmpAjaxContainerReady, function (event) {

            });
            // fire when user resize browser window or sidebar hide / show
            $(javatmp.settings.defaultOutputSelector).on(javatmp.settings.javaTmpContainerResizeEventName, function (event) {

            });
            $(javatmp.settings.defaultOutputSelector).on(javatmp.settings.cardFullscreenCompress, function (event, card) {
                // when card compress by pressing the top right tool button

            });
            $(javatmp.settings.defaultOutputSelector).on(javatmp.settings.cardFullscreenExpand, function (event, card) {
                // when card Expand by pressing the top right tool button
            });
            // before container replaced with new ajax content.
            $(javatmp.settings.defaultOutputSelector).on(javatmp.settings.javaTmpContainerRemoveEventName, function (event) {
                $(javatmp.settings.defaultOutputSelector).off(javatmp.settings.cardFullscreenCompress);
                $(javatmp.settings.defaultOutputSelector).off(javatmp.settings.cardFullscreenExpand);
                return true;
            });
        });
    </script>
</div>